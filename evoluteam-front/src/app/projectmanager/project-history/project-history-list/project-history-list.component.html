<div class="user-list-container">
  
  <p-toast></p-toast>

  <!-- Enhanced Header + Add Button -->
  <div class="list-header">
    <h2>Project History</h2>
    <button
      pButton
      class="add-user-button p-button"
      icon="pi pi-plus"
      label="Add New"
      routerLink="/projectmanager/project-history/new"
    ></button>
  </div>

  <!-- Enhanced Data Table Container -->
  <div class="table-container">
    <table class="p-datatable" *ngIf="histories.length > 0; else noData">
      <thead class="p-datatable-thead">
        <tr>
          <th>ID</th>
          <th>Project</th>
          <th>Event</th>
          <th>Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody class="p-datatable-tbody">
        <tr *ngFor="let history of histories">
          <td>{{ history.id }}</td>
          <td>{{ getProjectName(history.project?.id) }}</td>
          <td>{{ history.event }}</td>
          <td>{{ history.date | date: 'shortDate' }}</td>
          <td class="action-buttons">
            <button
              pButton
              class="p-button"
              pTooltip="Delete history"
              tooltipPosition="top"
              (click)="deleteHistory(history.id!)"
            >
              <i class="fa-solid fa-trash-can"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <ng-template #noData>
      <div class="empty-state">
        <div class="empty-icon">üìÅ</div>
        <div class="empty-title">No Project History Records Found</div>
        <div class="empty-message">
          Get started by adding your first project history record.
        </div>
        <button
          pButton
          class="p-button p-button-primary empty-action-btn"
          icon="pi pi-plus"
          label="Add New"
          routerLink="/projectmanager/project-history/new"
        ></button>
      </div>
    </ng-template>
  </div>
</div>
